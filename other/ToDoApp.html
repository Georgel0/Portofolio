<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <title>Todo App</title>
  <style>
    :root {
      --background: #101114;
      --primary-color: #1C1D20
      --secondary-color: #4A4D57;
      --accent-color: #00aaff;
      --text-color: #F9F9F9
    }
    * {
      margin: 0;
      padding: 0;
    }
    html {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      font-size: 16pt;
      color: var(--text-color);
    }
    body {
      min-height: 100vh;
      padding: 10px;
      background-color: var(--background);
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 {
      margin-top: 100px;
      margin-bottom: 10px;
      font-size: 3rem;
      font-weight: 800;
      text-transform: uppercase;
      text-align: center;
      color: var(--accent-color);
    }
    .wrapper {
      width: 700px;
      max-width: 100%;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    #todo-input {
      box-sizing: border-box;
      padding: 12px 20px;
      width: 100%;
      background: none;
      border: 2px solid var(--secondary-color);
      border-radius: 1000px;
      font: inherit;
      color: var(--text-color);
      caret-color: var(--accent-color);
    }
    #todo-input:focus {
      outline: none;
    }
    form {
      position: relative;
    }
    #add-button {
      position: absolute;
      top: 0;
      right: 0;
      
      background-color: var(--accent-color);
      height: 100%;
      padding: 0 30px;
      border: none;
      border-radius: 1000px;
      font: inherit;
      color: var(--background);
      cursor: pointer;
    }
    .todo {
      margin-bottom: 10px;
      padding: 0 16px;
      background-color: var(--primary-color);
      border-radius: 15px;
      display: flex;
      align-items: center;
    }
    .todo .todo-text {
      padding: 15px;
      padding-right: 0;
      flex-grow: 1;
      transition: 200ms ease;
    }
    .delete-button {
      padding: 3px;
      background: none;
      border: none;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
    }
    .delete-button svg {
      transition: 200ms ease;
    }
    .delete-button:hover svg {
      fill: #ff0033
    }
    .custom-checkbox {
      border: 2px solid var(--accent-color);
      border-radius: 50%;
      min-height: 20px;
      min-width: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-shrink: 0;
      transition: 200ms ease;
      cursor: pointer;
    }
    input[type="checkbox"]:checked ~ .custom-checkbox {
      background-color: var(--accent-color);
    }
    input[type="checkbox"]:checked ~ .custom-checkbox svg {
      fill: var(--primary-color)
    }
    input[type="chechbox"]:checked ~ .todo-text {
      text-decoration: line-through;
      color: var(--secondary-color);
    }
    input[type="checkbox"] {
      display: none;
    }
    @media(max-width: 500px) {
      html {
        font-size: 12pt;
      }
      #add-button {
        position: unset;
        width: 100%;
        margin-top: 10px;
        padding: 15px;
        height: auto;
      }
      h1 {
        margin-top: 50px;
        font-size: 15vw;
      }
    }
  </style>
</head>
<body>
  <h1>Todo App</h1>
  <div class="wrapper">
    <form action="">
      <input id="todo-input" type="text" placeholder="write anything and hit enter" autocomplete="off">
      <button id="add-button">ADD</button>
    </form>
    <ul id="todo-list">
     <!-- <li class="todo">
        <input type="checkbox" id="todo-1">
        <label for="todo-1" class="custom-checkbox">
          <svg fill="transparent" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/></svg>
        </label>
        <label for="todo-1" class="todo-text">text text text
        </label>
        <button class="delete-button">
          <svg fill="var(--secondary-color)" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/></svg></button>
      </li> --><!doctype html></html>
    </ul>
  </div>
  
  <script>
const todoForm = document.querySelector('form');
const todoInput = document.getElementById('todo-input');
const todoLisUL = document.getElementById('todo-list');

let allTodos = getTodos();
updateTodoList();

todoForm.addEventListener('submit', (e) => {
  e.preventDefault();
  addTodo();
})

function addTodo () {
  const todoText = todoInput.value.trim();
  if (todoText.length > 0) {
    const todoObject = {
      text: todoText,
      completed: false
    }
    allTodos.push(todoObject);
    updateTodoList();
    saveTodos();
    todoInput.value = "";
  }
}

function updateTodoList () {
  todoLisUL.innerHTML = "";
  allTodos.forEach((todo, todoIndex) => {
    todoItem = createTodoItem(todo, todoIndex);
    todoLisUL.append(todoItem);
  })
}

function createTodoItem (todo, todoIndex) {
  const todoId = "todo-" + todoIndex;
  const todoLi = document.createElement("li");
  const todoText = todo.text;
  todoLi.className = "todo";
  todoLi.innerHTML = `    <input type="checkbox" id="${todoId}">
        <label for="${todoId}" class="custom-checkbox">
          <svg fill="transparent" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/></svg>
        </label>
        <label for="${todoId}" class="todo-text">${todoText}
        </label>
        <button class="delete-button">
          <svg fill="var(--secondary-color)" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/></svg></button>`;
  
  const deleteButton = todoLi.querySelector(".delete-button");
  deleteButton.addEventListener("click", () => {
    deleteTodoItem(todoIndex);
  })
  const checkbox = todoLi.querySelector('input');
  checkbox.addEventListener("change", () => {
    allTodos[todoIndex].completed = checkbox.checked;
    saveTodos();
  })
  checkbox.checked = todo.completed;
  return todoLi;
}

function deleteTodoItem (todoIndex) {
  allTodos = allTodos.filter((_, i) => i !== todoIndex);
  saveTodos();
  updateTodoList();
}

function saveTodos () {
  const todosJson = JSON.stringify(allTodos);
  localStorage.setItem("todos", todosJson);
}

function getTodos () {
  const todos = localStorage.getItem("todos") || "[]";
  return JSON.parse(todos);
}
  </script>
</body>
</html>