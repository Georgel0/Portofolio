<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS to Tailwind AI Converter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    
    <style>
        html, body {
            height: 100%;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827
        }
        textarea::-webkit-scrollbar {
            width: 8px;
        }
        textarea::-webkit-scrollbar-track {
            background: #1F2937;
            border-radius: 4px;
        }
        textarea::-webkit-scrollbar-thumb {
            background: #4B5563; 
            border-radius: 4px;
        }
        textarea::-webkit-scrollbar-thumb:hover {
            background: #6B7280; 
        }
        textarea {
            font-family: 'Fira Code', monospace;
        }
        .loader {
            width: 24px;
            height: 24px;
            border: 3px solid #374151; 
            border-top-color: #60A5FA; 
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 p-4 md:p-8">

    <div class="max-w-7xl mx-auto">
        
<header class="text-center mb-8 md:mb-12">
    <h1 class="text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500 mb-2">CSS to Tailwind AI Converter</h1>
    
  <p class="text-lg text-gray-400">Paste your complex CSS below and let AI convert it to Tailwind classes.
            </p>
</header>

<main class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            
  <div class="flex flex-col">
  
  <label for="css-input" class="mb-2 text-sm font-medium text-gray-400">Your CSS</label>
  
  <textarea id="css-input" class="w-full h-96 lg:h-[65vh] p-4 bg-gray-800 border border-gray-700 rounded-lg shadow-inner text-gray-100 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder=".my-button {
    background-color: #3b82f6;
    padding: 12px 24px;
    border-radius: 8px;
    font-weight: 600;
}

.my-button:hover {
    background-color: #2563eb;
}

@media (min-width: 768px) {
    .my-button {
        width: calc(100% - 32px);
    }
}"></textarea>
</div>
            
            
  <div class="flex flex-col">
    <label for="tailwind-output" class="mb-2 text-sm font-medium text-gray-400">Tailwind Output</label>
    <textarea id="tailwind-output" class="w-full h-96 lg:h-[65vh] p-4 bg-gray-800 border border-gray-700 rounded-lg shadow-inner text-gray-200 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-gray-600" placeholder="Waiting for conversion..."
      readonly></textarea>
  </div>
</main>
  
  <footer class="text-center mt-6 flex items-center justify-center gap-4">
    <button id="convert-btn" class="px-8 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-700 transition duration-300 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed">Convert</button>
    
  <button id="copy-btn" class="px-6 py-3 bg-gray-700 text-gray-200 font-medium rounded-lg hover:bg-gray-600 transition duration-200 disabled:opacity-50" disabled>Copy to Clipboard</button>
        
  <div id="loader" class="loader hidden"></div>
</footer>

  <div id="error-message" class="text-red-400 text-center mt-4 h-6"></div>
</div>
<script>

const cssInput = document.getElementById('css-input');
const tailwindOutput = document.getElementById('tailwind-output');
const convertBtn = document.getElementById('convert-btn');
const copyBtn = document.getElementById('copy-btn');
const loader = document.getElementById('loader');
const errorMessage = document.getElementById('error-message');

// --- Gemini API Configuration ---
        
const API_KEY = "AIzaSyA6_BfOOHfyQ_eNz9iTfeZ9I723Iq4f17o";
const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${API_KEY}`;


const SYSTEM_PROMPT = `You are an expert CSS to Tailwind CSS converter. Your task is to convert the user's provided CSS code into the equivalent Tailwind CSS classes.

You MUST follow these rules:
1.  **Output ONLY the Tailwind classes.** Do not include the original CSS, any explanations, or markdown code fences (like \`\`\`css or \`\`\`).
2.  If the CSS contains multiple, distinct class selectors (e.g., ".card" and ".button"), provide the classes for each selector on a new line, prefixed by the selector itself for clarity.
3.  Combine pseudo-classes and media queries with their base selector.
4.  Handle media queries using Tailwind's responsive prefixes (e.g., \`@media (min-width: 768px) { ... }\` becomes \`md:...\`).
5.  Handle pseudo-selectors using Tailwind's variant prefixes (e.g., \`:hover\` becomes \`hover:...\`, \`::before\` becomes \`before:...\`, \`:first-child\` becomes \`first:...\`).
6.  Handle complex values (\`calc()\`, \`clamp()\`, \`minmax()\`, \`var()\`) using Tailwind's arbitrary value syntax.
    -   Example: \`width: calc(100% - 2rem);\` becomes \`w-[calc(100%-2rem)]\`
    -   Example: \`color: var(--primary-color);\` becomes \`text-[var(--primary-color)]\`
    -   Example: \`grid-template-columns: 1fr auto;\` becomes \`grid-cols-[1fr_auto]\`
7.  If a CSS property doesn't have a direct Tailwind utility, use arbitrary syntax (e.g., \`text-shadow: 1px 1px 2px black;\` becomes \`[text-shadow:1px_1px_2px_black]\`).

Example Input:
.card {
  background: white;
  width: 100%;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

@media (min-width: 640px) {
  .card {
    width: calc(50% - 1rem);
  }
}

.card-title {
  font-size: 1.25rem;
  color: var(--title-color);
}

.card-title:hover {
  text-decoration: underline;
}

Example Output:
.card: bg-white w-full shadow-lg sm:w-[calc(50%-1rem)]
.card-title: text-lg text-[var(--title-color)] hover:underline
`;

 /** Sets the loading state for the UI
  * @param {boolean} isLoading - Whether to show the loading state*/
        
function setLoading(isLoading) {
  if (isLoading) {
    convertBtn.disabled = true;
    convertBtn.classList.add('hidden');
    
    loader.classList.remove('hidden');
    
    copyBtn.disabled = true;
    
    errorMessage.textContent = '';
    
    tailwindOutput.value = 'Converting...'; } else {
    convertBtn.disabled = false;
    convertBtn.classList.remove('hidden');
    loader.classList.add('hidden');
            }
        }
/*** Calls the Gemini API with exponential backoff* 
 * @param {string} cssCode - The CSS code to convert* 
 * @param {number} maxRetries - Maximum number of retries*/
  
  async function callGeminiAPI(cssCode, maxRetries = 3) {
            
    if (!API_KEY) {
      throw new Error('API key is missin. Please add it to the script.');
            }
  const payload = {
      contents: [{ 
        parts: [{ text: cssCode }] }],
    systemInstruction: {
        parts: [{ text: SYSTEM_PROMPT }]
                },
            };

  let attempt = 0;
  let delay = 1000;

    while (attempt < maxRetries) {
      try {
    const response = await fetch(API_URL, {
      method: 'POST',
      headers: {'Content-Type': 'application/json', },
      body: JSON.stringify(payload),
                    });

  if (response.ok) {
      const result = await response.json();
      const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                        
  if (text) {
      return text.trim();
        } else {
      throw new Error('Invalid response structure from API.');
                        }
                    }
// Handle rate limiting and server errors with retry
    if (response.status === 429 || response.status >= 500) {
    attempt++;
      if (attempt >= maxRetries) {
    
    throw new Error(`API error: ${response.status} ${response.statusText}. Max retries reached.`);}
                        
    await new Promise(resolve => setTimeout(resolve, delay));
          
          delay *= 2;
        } else {
    const errorBody = await response.json();
    const errorMsg = errorBody?.error?.message || `${response.status} ${response.statusText}`;
    
    throw new Error(`API error: ${errorMsg}`);
                    } 
      } catch (error) {
        
        attempt++;
                    
      if (attempt >= maxRetries) {
        
        throw error;
  }
    
  await new Promise(resolve => setTimeout(resolve, delay));
          delay *= 2;
                }
            }
            //fallback
    throw new Error('Failed to get response from AI after all retries.');
        }

// Main function to handle the conversion process
        
async function handleConvert() {
    const cssCode = cssInput.value.trim();
    if (!cssCode) { errorMessage.textContent = 'Please enter some CSS code to convert.';
                return;
            }
    setLoading(true);

  try {
    const tailwindClasses = await callGeminiAPI(cssCode);
      
      tailwindOutput.value = tailwindClasses;
      
      copyBtn.disabled = false; // Enable copy button on success
      } catch (error) {
                console.error(error)
                let friendlyError = `Conversion failed.`;
                if (error.message.includes('API key')) {
                    friendlyError = "Conversion failed: Invalid or missing API key.";
                } else if (error.message.includes('400')) {
                    friendlyError = "Conversion failed: The request was invalid (400).";
                } else if (error.message.includes('quota')) {
                    friendlyError = "Conversion failed: You may have exceeded your API quota.";
                } else {
                    friendlyError = `Conversion failed. Check console for details.`
                }
                
                errorMessage.textContent = friendlyError;
                tailwindOutput.value = `Error: ${error.message}`;
            } finally {
                setLoading(false);
            }
        }

// Handles copying the output to the clipboard
         
function handleCopy() {
        
    const tempTextArea = document.createElement('textarea');
            tempTextArea.value = tailwindOutput.value;
    document.body.appendChild(tempTextArea);
            tempTextArea.select();
            
    try {
        document.execCommand('copy');
        copyBtn.textContent = 'Copied!';
        setTimeout(() => {
            copyBtn.textContent = 'Copy to Clipboard';
                }, 2000);
} catch (err) {
    console.error('Failed to copy text: ', err);
    errorMessage.textContent = 'Failed to copy to clipboard.';
}
            
    document.body.removeChild(tempTextArea);
        }

convertBtn.addEventListener('click', handleConvert);
copyBtn.addEventListener('click', handleCopy);

    </script>
</body>
</html>


